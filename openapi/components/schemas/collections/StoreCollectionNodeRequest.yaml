type: object
required: [node_type, display_name]
properties:
  parent_id:
    anyOf:
      - type: integer
        minimum: 1
      - type: 'null'
  node_type:
    type: string
    enum: [container, leaf]
  leaf_kind:
    type: string
    enum: [file, link]
  display_name:
    type: string
    minLength: 1
    maxLength: 255
  position:
    type: integer
    minimum: 0
  layout_x:
    type: integer
  layout_y:
    type: integer
  metadata:
    type: object
    additionalProperties: true
  file:
    $ref: './CollectionNodeFile.yaml'
  link:
    $ref: './CollectionNodeLink.yaml'
allOf:
  - if:
      properties:
        node_type:
          const: leaf
    then:
      properties:
        leaf_kind: {}
      required: [leaf_kind]
  - if:
      properties:
        leaf_kind:
          const: file
    then:
      properties:
        file: {}
      required: [file]
  - if:
      properties:
        leaf_kind:
          const: link
    then:
      properties:
        link: {}
      required: [link]
